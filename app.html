<div class="mainContainer">
  <h1 mat-dialog-title class="px-3">Create API</h1>

  <form #apiForm="ngForm">

    <mat-form-field appearance="fill">
      <mat-label>Name</mat-label>
      <input autocomplete="off" matInput [(ngModel)]="dataProviderForm.api_name" #api_name="ngModel" name="api_name"
        required>
      <mat-error *ngIf="api_name.invalid && (api_name.touched || api_name.dirty || submitted )">
        Please enter name
      </mat-error>

    </mat-form-field>
    <mat-form-field class="example-full-width" appearance="fill">
      <mat-label>Description</mat-label>
      <input autocomplete="off" matInput #desc="ngModel" maxlength="150" [(ngModel)]="dataProviderForm.api_description"
        name="api_description" required>
      <!-- <mat-hint align="start"> </mat-hint>
      <mat-hint align="end">{{desc.value.length}} / 150</mat-hint> -->
      <mat-hint class="mat-error" *ngIf="desc.invalid && (desc.dirty || desc.touched || submitted )">
        Please enter description
      </mat-hint>
    </mat-form-field>

    <mat-form-field class="example-full-width" appearance="fill">
      <mat-label>Redirect URL</mat-label>
      <input autocomplete="off" matInput #redirecturl="ngModel" maxlength="150"
        [(ngModel)]="dataProviderForm.redirect_url" name="redirect_url" required>
      <!-- <mat-hint align="start"> </mat-hint>
      <mat-hint align="end">{{redirecturl.value.length}} / 150</mat-hint> -->
      <mat-hint class="mat-error" *ngIf="redirecturl.invalid && (redirecturl.dirty || redirecturl.touched || submitted )">
        Please enter Redirect URL
      </mat-hint>

    </mat-form-field>

    <div class="container">
      <div class="grid">

        <div class="col-3 lg:col-3">
          <mat-form-field appearance="fill">
            <mat-label>Method</mat-label>
            <mat-select [(ngModel)]="dataProviderForm.method" name="method" #method="ngModel" required>
              <mat-option *ngFor="let item of methodOptions" [value]="item">
                {{item}}
              </mat-option>
            </mat-select>
            <mat-hint class="mat-error" *ngIf="method.invalid && (method.dirty || method.touched || submitted)">
              Please select 
            </mat-hint>
            <mat-hint align="end"> ^</mat-hint>
          </mat-form-field>
        </div>
        <div class="col-9 lg:col-9">
          <mat-form-field appearance="fill">
            <mat-label>URL</mat-label>
            <input matInput [(ngModel)]="dataProviderForm.url" #url="ngModel" name="url" required>
            <mat-hint class="mat-error" *ngIf="url.invalid && (url.dirty || url.touched || submitted )">
              Please Enter URL
            </mat-hint>
          </mat-form-field>
        </div>
      </div>
    </div>

    <!-- header data -->

    <div class="flex justify-content-between align-items-center mb-2">
      <h4 class="primary-heading font-medium text-sm mb-0">HEADER DATA</h4>
      <button mat-icon-button color="primary" type="button">
        <mat-icon (click)="AddHeaderData()">add_circle_outline</mat-icon>
      </button>
    </div>

    <ng-container *ngFor="let data of dataProviderForm.headerData; let i = index">
      <div class="grid">
        <div class="col-6 lg:col-4">
          <mat-form-field appearance="fill">
            <mat-label>key</mat-label>
            <input matInput [(ngModel)]="data.key" #key="ngModel" name="key_{{i}}" required>
            <mat-hint class="mat-error" *ngIf="key.invalid && (key.dirty || key.touched || submitted)">
              Please Enter Key
            </mat-hint>
          </mat-form-field>
        </div>
        <div class="col-6 lg:col-4">
          <mat-form-field appearance="fill">
            <mat-label>Value</mat-label>
            <input matInput [(ngModel)]="data.value" #value="ngModel" name="value_{{i}}" required>
            <mat-hint class="mat-error" *ngIf="value.invalid && (value.dirty || value.touched || submitted)">
              Please Enter Value
            </mat-hint>
          </mat-form-field>


        </div>
        <div class="col-6 lg:col-3">

          <mat-form-field appearance="fill">
            <mat-label>Description</mat-label>
            <input matInput [(ngModel)]="data.description" #description="ngModel" name="desription_{{i}}" required>
            <mat-hint class="mat-error" *ngIf="description.invalid && (description.dirty || description.touched || submitted)">
              Please Enter Description
            </mat-hint>
          </mat-form-field>
        </div>
        <div class="col-1">
          <button color="primary" mat-icon-button (click)=" DeleteHeaderData(i)" class="mt-2">
            <mat-icon color="warn" class="cursor-pointer">remove_circle_outline</mat-icon>
          </button>
        </div>
      </div>
    </ng-container>

    <!-- path variable -->

    <div class="flex justify-content-between align-items-center mb-2">
      <h4 class="primary-heading font-medium text-sm mb-0">PATH VARIABLE</h4>
      <button mat-icon-button color="primary" type="button">
        <mat-icon (click)="AddVariablePath()">add_circle_outline</mat-icon>
      </button>
    </div>

    <ng-container *ngFor="let data of dataProviderForm.pathVariableData; let i = index">
      <div class="grid">
        <div class="col-6 lg:col-4">
          <mat-form-field appearance="fill">
            <mat-label>key</mat-label>
            <input matInput [(ngModel)]="data.key" #key2="ngModel" name="key2_{{i}}" required>
            <mat-hint class="mat-error" *ngIf="key2.invalid && (key2.dirty || key2.touched || submitted)">
              Please Enter Key
            </mat-hint>
          </mat-form-field>
        </div>
        <div class="col-6 lg:col-4">
          <mat-form-field appearance="fill">
            <mat-label>Value</mat-label>
            <input matInput [(ngModel)]="data.value" name="value2_{{i}}" #value2="ngModel" required>
            <mat-hint class="mat-error" *ngIf="value2.invalid && (value2.dirty || value2.touched || submitted)">
              Please Enter value
            </mat-hint>
          </mat-form-field>


        </div>
        <div class="col-6 lg:col-3">

          <mat-form-field appearance="fill">
            <mat-label>Description</mat-label>
            <input matInput [(ngModel)]="data.description" name="desription2_{{i}} "  #description2="ngModel" required>
            <mat-hint class="mat-error" *ngIf="description2.invalid && (description2.dirty || description2.touched || submitted)">
              Please Enter Description
            </mat-hint>
          </mat-form-field>
        </div>
        <div class="col-1">
          <button color="primary" mat-icon-button (click)=" DeleteVariablePath(i)" class="mt-2">
            <mat-icon color="warn" class="cursor-pointer">remove_circle_outline</mat-icon>
          </button>
        </div>
      </div>
    </ng-container>

    <!-- query params -->

    <div class="flex justify-content-between align-items-center mb-2">
      <h4 class="primary-heading font-medium text-sm mb-0">QUERY PARAMS</h4>
      <button mat-icon-button color="primary" type="button">
        <mat-icon (click)="AddQueryParams()">add_circle_outline</mat-icon>
      </button>
    </div>

    <ng-container *ngFor="let data of dataProviderForm.queryParams; let i = index">
      <div class="grid">
        <div class="col-6 lg:col-4">
          <mat-form-field appearance="fill">
            <mat-label>key</mat-label>
            <input matInput [(ngModel)]="data.key" #key3="ngModel" name="key3_{{i}}" required>
            <mat-hint class="mat-error" *ngIf="key3.invalid && (key3.dirty || key3.touched || submitted)">
              Please Enter Key
            </mat-hint>
          </mat-form-field>
        </div>
        <div class="col-6 lg:col-4">
          <mat-form-field appearance="fill">
            <mat-label>Value</mat-label>
            <input matInput [(ngModel)]="data.value" name="value3_{{i}}" #value3="ngModel" required>
            <mat-hint class="mat-error" *ngIf="value3.invalid && (value3.dirty || value3.touched || submitted)">
              Please Enter value
            </mat-hint>
          </mat-form-field>


        </div>
        <div class="col-6 lg:col-3">

          <mat-form-field appearance="fill">
            <mat-label>Description</mat-label>
            <input matInput [(ngModel)]="data.description" name="desription3_{{i}} "  #description3="ngModel" required>
            <mat-hint class="mat-error" *ngIf="description3.invalid && (description3.dirty || description3.touched || submitted)">
              Please Enter Description
            </mat-hint>

          </mat-form-field>
        </div>
        <div class="col-1">
          <button color="primary" mat-icon-button (click)=" DeleteQueryParams(i)" class="mt-2">
            <mat-icon color="warn" class="cursor-pointer">remove_circle_outline</mat-icon>
          </button>
        </div>
      </div>
    </ng-container>

    <!-- authorization -->
    <mat-form-field appearance="fill">
      <mat-label>Authorization</mat-label>
      <mat-select [(ngModel)]="dataProviderForm.auth" name="auth">
        <mat-option *ngFor="let item of authOptions" [value]="item">
          {{item}}
        </mat-option>
      </mat-select>
      <mat-hint align="end"> ^</mat-hint>
    </mat-form-field>


    <!-- output-type -->

    <div class="container">
      <div class="grid">
        <div class="col-6 lg:col-6">
          <mat-form-field appearance="fill">
            <mat-label>Output type</mat-label>
            <mat-select [(ngModel)]="dataProviderForm.output_type" name="output_type">
              <mat-option *ngFor="let item of outputTypeOption" [value]="item">
                {{item}}
              </mat-option>
            </mat-select>
            <mat-hint align="end"> ^</mat-hint>
          </mat-form-field>


        </div>
        <div class="col-6 lg:col-6">

          <mat-form-field appearance="fill">
            <mat-label>Output Parent X-path</mat-label>
            <input matInput>
          </mat-form-field>

        </div>
      </div>
    </div>


    <!-- output -->
    <div class="flex justify-content-between align-items-center mb-2">
      <h4 class="primary-heading font-medium text-sm mb-0">OUTPUT</h4>
      <button mat-icon-button color="primary" type="button">
        <mat-icon (click)="AddOutput()">add_circle_outline</mat-icon>
      </button>
    </div>

    <ng-container *ngFor="let data of dataProviderForm.output; let i = index">
      <div class="grid">
        <div class="col-6 lg:col-1">

          <section class="example-section">
            <mat-checkbox class="example-margin" [(ngModel)]="data.priority" name="priority"></mat-checkbox>
          </section>

        </div>
        <div class="col-6 lg:col-3">
          <mat-form-field appearance="fill">
            <mat-label>Label</mat-label>
            <input matInput [(ngModel)]="data.label" name="label">
          </mat-form-field>
        </div>
        <div class="col-6 lg:col-3">
          <mat-form-field appearance="fill">
            <mat-label>Type</mat-label>
            <mat-select [(ngModel)]="data.type" name="type">
              <mat-option *ngFor="let item of typeOption" [value]="item">
                {{item}}
              </mat-option>
            </mat-select>
            <mat-hint align="end"> ^</mat-hint>
          </mat-form-field>

        </div>
        <div class="col-6 lg:col-4">

          <mat-form-field appearance="fill">
            <mat-label>X-path</mat-label>
            <input matInput [(ngModel)]="data.x_path" name="x-path">
          </mat-form-field>
        </div>
        <div class="col-1">
          <button color="primary" mat-icon-button (click)=" DeleteOutput(i)" class="mt-2">
            <mat-icon color="warn" class="cursor-pointer">remove_circle_outline</mat-icon>
          </button>
        </div>
      </div>
    </ng-container>
    <button mat-raised-button color="primary" (click)="getData()">Create</button>

  </form>
</div>